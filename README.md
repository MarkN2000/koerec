# Koerec - 高速音声コーパス作成ツール

## 概要
合成音声制作のための音声コーパス作成を効率化するWebアプリケーションです。大量の文章を読み上げて録音し、文章と音声ファイルを対応付けたデータセットを簡単に作成できます。

## 主要機能

### 1. 台本管理機能
- **台本セットの選択**: 事前定義された台本セットから選択
- **カスタム台本のアップロード**: ユーザー独自の台本ファイル（TXT）をアップロード
- **台本の編集**: ブラウザ上で台本の内容を編集可能
- **台本の保存**: 編集した台本をローカルストレージに保存

### 2. 録音機能
- **ワンクリック録音**: 録音ボタンで録音開始・停止
- **リアルタイム波形表示**: 録音中の音声レベルを視覚的に表示
- **録音品質の可視化**: 録音後の波形を表示して品質を確認
- **キーボードショートカット**: 
  - `Space`: 録音開始/停止/再録音
  - `Enter`: 次の文章へ進む
  - `P`: 録音音声の再生/一時停止
  - `Backspace`: 前の文章に戻る

### 3. 録音確認・管理機能
- **録音音声の再生**: 録音直後に音声を確認
- **再録音機能**: 気に入らない場合は簡単に再録音
- **進捗の保存**: ブラウザを閉じても進捗が保持される
- **セッションの再開**: 前回の続きから録音を再開可能

### 4. データエクスポート機能
- **エクスポート形式の選択**: 初期画面で出力形式を選択可能
- **複数形式でのエクスポート**:
  - ZIPファイル（音声ファイル + 対応表）
  - TXTファイル（音声ファイル名|話者名|言語|文章内容の形式）
- **ファイル名の自動生成**: 連番付きのファイル名を自動生成
- **メタデータの付与**: 録音日時、台本情報などのメタデータを付与

## 技術仕様

### フロントエンド
- **HTML5**: セマンティックなマークアップ
- **CSS3**: Tailwind CSSを使用したレスポンシブデザイン
- **JavaScript (ES6+)**: モダンなJavaScript機能を活用
- **Web APIs**:
  - MediaRecorder API: 音声録音
  - Web Audio API: 音声解析・可視化
  - IndexedDB: ローカルデータ保存
  - File API: ファイルの読み込み・ダウンロード

### データ保存
- **ローカルストレージ**: 進捗情報の保存
- **IndexedDB**: 録音データの保存
- **サーバーサイド保存なし**: プライバシー保護のため、すべてのデータはローカルに保存

### 対応ブラウザ
- Chrome 60+
- Firefox 55+
- Safari 11+
- Edge 79+

## ユーザーインターフェース

### 画面構成
1. **初期画面**: 台本選択・エクスポート形式選択・設定
2. **録音画面**: メインの録音作業画面
3. **完了画面**: データダウンロード・管理

### UI要素
- **録音ボタン**: 大きな円形ボタンで録音状態を視覚的に表示
- **波形表示**: リアルタイム・録音後の波形を表示
- **進捗表示**: 現在の進捗を数値とバーで表示
- **ショートカットガイド**: キーボードショートカットの表示

## セキュリティ・プライバシー

### データ保護
- **ローカル保存のみ**: 録音データはサーバーに送信されません
- **暗号化**: 機密性の高いデータは暗号化して保存
- **データ削除**: ユーザーが明示的に削除するまでデータを保持

### アクセス権限
- **マイクアクセス**: 録音機能に必要な最小限の権限
- **ローカルストレージ**: 進捗保存のための権限

## パフォーマンス要件

### 録音品質
- **サンプルレート**: 44.1kHz
- **ビット深度**: 16bit
- **フォーマット**: WAV形式

### レスポンス時間
- **録音開始**: 1秒以内
- **音声再生**: 即座に開始
- **データエクスポート**: 10秒以内（100文程度）

## 今後の拡張予定

### 機能拡張
- **音声品質チェック**: 自動的な音声品質の評価
- **バッチ処理**: 複数台本の一括処理
- **テンプレート機能**: よく使う台本のテンプレート化
- **統計機能**: 録音時間、進捗率などの統計表示

### UI/UX改善
- **ダークモード**: 長時間使用時の目の負担軽減
- **アクセシビリティ**: スクリーンリーダー対応
- **多言語対応**: 英語、中国語などの対応

## 開発・運用

### 開発環境
- **ローカル開発**: ブラウザのみで動作
- **デプロイ**: 静的ファイルのホスティング
- **依存関係**: CDN経由でのライブラリ読み込み

### メンテナンス
- **定期更新**: ブラウザAPIの変更に対応
- **バグ修正**: ユーザーフィードバックに基づく改善
- **機能追加**: ユーザー要望に基づく新機能の実装

---

## 使用方法

1. ブラウザでアプリケーションを開く
2. 台本セットを選択またはカスタム台本をアップロード
3. エクスポート形式を選択（TXT形式）
4. 「録音開始」ボタンをクリック
5. 表示された文章を読み上げ、録音ボタンで録音
6. 録音音声を確認し、必要に応じて再録音
7. Enterキーで次の文章へ進む
8. 全文章の録音完了後、データをダウンロード

## 出力ファイル形式

### TXTファイル形式
```
audio_0001.wav|test_speaker|JP|思わずガッツポーズしちゃった！
audio_0002.wav|test_speaker|JP|プレゼント、すごく気に入ったよ！
audio_0003.wav|test_speaker|JP|テンション上がるね
```

- **ファイル名**: `audio_XXXX.wav` (XXXXは4桁の連番)
- **話者名**: 設定可能（デフォルト: test_speaker）
- **言語**: 設定可能（デフォルト: JP）
- **文章内容**: 録音した文章

## 注意事項

- 録音データはローカルに保存されるため、ブラウザのデータを削除すると録音データも失われます
- 大量の録音データはブラウザのストレージ容量を消費します
- 定期的にデータをエクスポートしてバックアップを取ることを推奨します