# 合成音声コーパス作成支援アプリ 要件定義書

## プロジェクト概要

合成音声の学習用コーパスを作成するためのWebアプリケーションです。大量の文章を読み上げて録音し、音声ファイルとテキストの対応関係を管理できるツールを提供します。

## 主要機能

### 1. 台本セット選択機能
- 複数の台本セットから選択可能
- 各セットには文章数と内容の概要を表示
- カスタム台本のアップロード機能（将来実装予定）

### 2. 録音機能
- リアルタイム録音（WebRTC MediaRecorder API使用）
- 録音開始/停止の直感的なボタン操作
- 録音中の視覚的フィードバック（アニメーション）
- マイクアクセス権限の適切な管理

### 3. 音声確認機能
- 録音完了後の即座な再生確認
- 音声品質の確認と再録音の選択
- 音声波形の可視化（将来実装予定）

### 4. 進捗管理機能
- 現在の進捗状況の表示（X/Y形式）
- 文章の順次表示
- キーボードショートカット（Enterキー）での操作

### 5. データ出力機能
- 録音データとテキストの対応付け
- ZIPファイル形式での一括ダウンロード
- transcript.txtファイルの自動生成
- サーバーへのデータ保存なし（クライアントサイドのみ）

## 技術仕様

### フロントエンド
- **HTML5**: セマンティックなマークアップ
- **CSS3**: Tailwind CSSによるレスポンシブデザイン
- **JavaScript (ES6+)**: モダンなJavaScript機能
- **Web APIs**: MediaRecorder API, File API, JSZip

### 対応ブラウザ
- Chrome 47+
- Firefox 25+
- Safari 14+
- Edge 79+

### ファイル形式
- **音声**: WAV形式（ブラウザの制約により実際はWebM）
- **テキスト**: UTF-8エンコーディング
- **出力**: ZIP形式

## ユーザーインターフェース要件

### 画面構成
1. **初期画面**: 台本セット選択
2. **録音画面**: 文章表示と録音操作
3. **完了画面**: ダウンロードと再開オプション

### 操作性要件
- 直感的なボタン配置
- 明確な状態表示
- キーボードショートカット対応
- レスポンシブデザイン（モバイル対応）

### アクセシビリティ
- スクリーンリーダー対応
- キーボードナビゲーション
- 高コントラスト表示
- フォーカス管理

## セキュリティ要件

### プライバシー保護
- 録音データのサーバー送信禁止
- ローカルストレージの最小限使用
- マイクアクセス権限の適切な管理

### データ保護
- クライアントサイドでのみデータ処理
- 一時的なメモリ使用のみ
- ダウンロード後の自動クリーンアップ

## パフォーマンス要件

### 応答性
- 録音開始/停止の即座な反応（<100ms）
- 音声再生の遅延最小化（<200ms）
- ZIP生成時間の最適化（<5秒）

### メモリ管理
- 大量録音データの効率的な管理
- メモリリークの防止
- ガベージコレクションの最適化

## 将来の拡張予定

### 機能拡張
- カスタム台本のアップロード機能
- 音声波形の可視化
- 録音品質の自動評価
- 複数話者対応
- バッチ処理機能

### 技術改善
- PWA（Progressive Web App）対応
- オフライン機能
- クラウドストレージ連携
- AI音声品質評価

## 制約事項

### 技術的制約
- ブラウザのMediaRecorder API制限
- ファイルサイズ制限（ブラウザ依存）
- 同時録音数の制限

### 運用制約
- サーバーサイド処理なし
- 外部API依存なし
- オフライン動作必須

## 品質要件

### 可用性
- 99%以上の稼働率
- エラー時の適切なメッセージ表示
- データ損失の防止

### 使いやすさ
- 直感的な操作フロー
- 明確なエラーメッセージ
- 適切なヘルプ機能

## 開発・保守要件

### コード品質
- モジュラー設計
- 適切なコメント記述
- エラーハンドリングの徹底

### テスト要件
- ユニットテスト
- 統合テスト
- ブラウザ互換性テスト
- アクセシビリティテスト

---

## 現在の実装状況

基本的な録音機能は実装済みですが、以下の改善が必要です：

### 不足している機能
1. **音声波形の可視化**
2. **録音品質の自動評価**
3. **カスタム台本のアップロード**
4. **より詳細な進捗表示**
5. **エラーハンドリングの強化**

### UI/UXの改善点
1. **より直感的な録音ボタンのデザイン**
2. **録音中の時間表示**
3. **音声再生のコントロール強化**
4. **モバイル対応の最適化**
5. **ダークモード対応**

この要件定義書に基づいて、段階的に機能を実装していくことを推奨します。